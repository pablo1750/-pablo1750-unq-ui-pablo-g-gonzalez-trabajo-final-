(this.webpackJsonprpsls=this.webpackJsonprpsls||[]).push([[0],{15:function(e,t,a){},16:function(e,t,a){},19:function(e,t,a){"use strict";a.r(t);var c=a(0),s=a(2),n=a.n(s),r=a(8),i=a.n(r),o=(a(15),a.p,a(16),{name:"Covered",beat:[{card:"",message:""},{card:"",message:""}],image:"assets/card_covered.png"}),l={name:"Empty",beat:[{card:"",message:""},{card:"",message:""}],image:"assets/card_empty.png"},d=[{name:"Rock",beat:[{card:"Lizard",message:"Rock crushes Lizard"},{card:"Scissors",message:"Rock crushes Scissors"}],image:"assets/card_rock.png"},{name:"Paper",beat:[{card:"Rock",message:"Paper covers Rock"},{card:"Spock",message:"Paper disproves Spock"}],image:"assets/card_paper.png"},{name:"Scissors",beat:[{card:"Paper",message:"Scissors cuts Paper"},{card:"Lizard",message:"Scissors decapitates Lizard"}],image:"assets/card_scissors.png"},{name:"Lizard",beat:[{card:"Spock",message:"Lizard poisons Spock"},{card:"Paper",message:"Lizard eats Paper"}],image:"assets/card_lizard.png"},{name:"Spock",beat:[{card:"Scissors",message:"Spock smashes Scissors"},{card:"Rock",message:"Spock vaporizes Rock"}],image:"assets/card_spock.png"}],u=function(e){return Object(c.jsx)(c.Fragment,{children:Object(c.jsx)("div",{className:"card",style:{width:e.width?e.width:"100%"},children:Object(c.jsx)("img",{src:e.card.image,style:{width:"100%"},class:"card-img-top",alt:"card-image"})})})},j=function(e){return Object(c.jsxs)("div",{style:{width:"100%"},children:[e.card&&!e.show&&Object(c.jsx)(u,{card:o,width:"100px"}),e.card&&e.show&&Object(c.jsx)(u,{card:e.card,width:"100px"}),!e.card&&Object(c.jsx)(u,{card:l,width:"100px"})]})},b=0,m=1,p=0,O=1,f=2,h=3,x=function(e){return{ok:!1,name:"",victories:0,score:0,readonly:e,type:m,turn:!1,choices:[],cardSelected:void 0,show:!1,status:p}},y=function(e){return Object(c.jsxs)("div",{className:"card text-white ".concat(e.turn?"bg-primary":"bg-secondary"),children:[Object(c.jsxs)("div",{className:"card-header",children:[e.data.name," ",e.data.victories>0&&Object(c.jsx)("span",{class:"badge badge-primary badge-pill",title:"victories",children:e.data.victories})]}),Object(c.jsxs)("div",{className:"card-body",children:[Object(c.jsx)("p",{className:"card-text",children:Object(c.jsx)(j,{card:e.data.cardSelected,show:e.show})}),e.data.type===m&&e.turn&&Object(c.jsx)("button",{className:"btn btn-success",onClick:e.onReady,disabled:!e.turn,children:"Ready?"}),e.data.type===b&&e.turn&&Object(c.jsxs)("button",{className:"btn btn-success",onClick:e.onReady,disabled:!0,children:[Object(c.jsx)("div",{className:"spinner-border  spinner-border-sm text-primary",role:"status",children:Object(c.jsx)("span",{className:"sr-only",children:"Loading..."})})," Choosing"]}),!e.turn&&Object(c.jsx)("button",{className:"btn btn-success",onClick:e.onReady,disabled:!0,children:"Waiting"}),e.data.status==p&&Object(c.jsx)("div",{className:"alert alert-info",children:"Playing"}),e.data.status==O&&Object(c.jsxs)("div",{className:"alert alert-success",children:["Winner (",e.data.score,")"]}),e.data.status==f&&Object(c.jsxs)("div",{className:"alert alert-danger",children:["Loser (",e.data.score,")"]}),e.data.status==h&&Object(c.jsxs)("div",{className:"alert alert-success",children:["Tied (",e.data.score,")"]})]})]})},g=a(9),S=a(1),v=a(4),k=a(7),N=a.n(k),w=function(e){var t=Object(s.useState)(e.data),a=Object(v.a)(t,2),n=a[0],r=a[1];return Object(c.jsx)(c.Fragment,{children:Object(c.jsxs)("form",{onSubmit:function(t){t.preventDefault(),e.onConfirmPlayer(e.index,Object(S.a)(Object(S.a)({},n),{},{victories:0,score:0,ok:!0}))},children:[Object(c.jsxs)("label",{children:["Player ",e.index]}),Object(c.jsx)("input",{value:n.name,disabled:n.type==b,onChange:function(e){r(Object(S.a)(Object(S.a)({},n),{},{name:e.target.value}))}}),n.type==b&&Object(c.jsx)("button",{onClick:function(e){r(Object(S.a)(Object(S.a)({},n),{},{name:"",type:m}))},children:"HUMAN"}),n.type==m&&Object(c.jsx)("button",{onClick:function(e){r(Object(S.a)(Object(S.a)({},n),{},{name:"CPU",type:b}))},children:"CPU"}),Object(c.jsx)("button",{type:"submit",children:"Ok"})]})})},C=function(e){return Object(c.jsxs)("button",{className:"btn m-0 p-0",onClick:function(){e.onSelect(e.card)},disabled:e.player.type==b,children:[e.player.type==b&&Object(c.jsx)(u,{card:o}),e.player.type==m&&Object(c.jsx)(u,{card:e.card})]})},R=0,P=1,L=2,z=3,F=4,_=5,W={playersSlots:[x(!0),x(!0)],start:!1,current:null,endRound:!1,state:R,roundHasWinner:!1},E=function(e){var t=Object(s.useState)(W),a=Object(v.a)(t,2),n=a[0],r=a[1],i=Object(s.useState)(!1),l=Object(v.a)(i,2),u=l[0],j=l[1];Object(s.useEffect)((function(){j(n.playersSlots.every((function(e,t){return e.ok})))}),[n.playersSlots]),Object(s.useEffect)((function(){if(n.playersSlots.filter((function(e){return e.status===p})).every((function(e){return!!e.cardSelected}))&&(r(Object(S.a)(Object(S.a)({},n),{},{state:z})),A()),n.current in n.playersSlots&&n.playersSlots[n.current].status===f)return H(),void setTimeout((function(){E(o)}),10);n.current in n.playersSlots&&n.playersSlots[n.current].type===b&&(H(),setTimeout((function(){E(d[M(0,5)])}),500))}),[n.current]),Object(s.useEffect)((function(){n.endRound&&alert("end round")}),[n.endRound]);var m=function(e){r(Object(S.a)(Object(S.a)({},n),{},{playersSlots:n.playersSlots.filter((function(t,a){return a!==e}))}))},k=function(e,t){r(Object(S.a)(Object(S.a)({},n),{},{playersSlots:n.playersSlots.map((function(a,c){return c===e?t:a}))}))},E=function(e){r(Object(S.a)(Object(S.a)({},n),{},{playersSlots:n.playersSlots.map((function(t,a){return a===n.current?Object(S.a)(Object(S.a)({},t),{},{cardSelected:e}):t})),current:n.current+1,state:P})),console.log(n)},T=function(){var e=n.playersSlots.filter((function(e){return e.status==p})).map((function(e){return e.cardSelected})),t=e.filter((function(e,t,a){return a.indexOf(e)===t})).map((function(t){return{name:t.name,value:e.filter((function(e){return function(e,t){return e.beat.some((function(e){return e.card==t.name}))}(t,e)})).length,count:e.filter((function(e){return t.name===e.name})).length}})),a=Math.max.apply(null,t.map((function(e){return e.value}))),c=1==t.filter((function(e){return e.value==a})).length&&1==t.filter((function(e){return e.value==a}))[0].count,s=c?O:h;r(Object(S.a)(Object(S.a)({},n),{},{state:_,roundHasWinner:c,playersSlots:n.playersSlots.map((function(n){if(n.status!==p)return n;var r=t.find((function(e){return e.name===n.cardSelected.name})).value;return console.log({cardsSelected:e,scores:t,maxScore:a,hasWinner:c,winnersStatus:s,player:n,score:r}),Object(S.a)(Object(S.a)({},n),{},{score:r,status:r==a?s:f,victories:r==a&&c?n.victories+1:n.victories})}))}))},H=function(){r(Object(S.a)(Object(S.a)({},n),{},{state:L}))},M=function(e,t){return Math.floor(Math.random()*(t-e))+e},A=function(){N.a.fire({title:"RPSLS!",html:"All players have chosen.",timer:1500,timerProgressBar:!0,willOpen:function(){N.a.showLoading()},willClose:function(){T()}}).then((function(e){}))};return Object(c.jsxs)(c.Fragment,{children:[n.state==R&&Object(c.jsx)("div",{className:"row game-settings open fixed-top",children:Object(c.jsxs)("ul",{className:"list-group col-12",children:[n.playersSlots.map((function(e,t){return e.ok&&Object(c.jsx)("li",{className:"list-group-item",children:Object(c.jsx)("span",{children:e.name})},"playerOk-".concat(t))})),n.playersSlots.map((function(e,t){return!n.start&&!e.ok&&Object(c.jsxs)("li",{className:"list-group-item",children:[Object(c.jsx)(w,{index:t,data:e,onRemovePlayer:m,onConfirmPlayer:k}),!e.readonly&&Object(c.jsx)(c.Fragment,{children:Object(c.jsx)("button",{onClick:function(){return m(t)},children:"Remove"})})]},"playerSlot-".concat(t))})),Object(c.jsxs)("li",{className:"list-group-item",children:[u&&Object(c.jsx)("button",{className:"btn btn-primary",onClick:function(){r(Object(S.a)(Object(S.a)({},n),{},{playersSlots:[].concat(Object(g.a)(n.playersSlots),[x(!1)])}))},children:"Add Player"}),u&&Object(c.jsx)("button",{className:"btn btn-primary",onClick:function(){r(Object(S.a)(Object(S.a)({},n),{},{state:P,current:0}))},children:"Start"}),Object(c.jsx)("button",{className:"btn btn-primary",onClick:function(){r(W)},children:"Restart Game"})]})]})}),n.state>=P&&Object(c.jsx)("div",{className:"container overflow-auto",children:Object(c.jsxs)("div",{className:"row",children:[Object(c.jsxs)("div",{className:"col col-12",children:[Object(c.jsx)("button",{className:"btn btn-danger m-1",onClick:function(){r(Object(S.a)(Object(S.a)({},n),{},{state:R,current:null,playersSlots:n.playersSlots.map((function(e){return Object(S.a)(Object(S.a)({},e),{},{cardSelected:void 0})}))}))},children:"Exit board"}),n.state==z&&Object(c.jsx)("button",{className:"btn btn-info m-1",onClick:function(){r(Object(S.a)(Object(S.a)({},n),{},{state:F})),setTimeout((function(){T()}),1e3)},children:"Show Cards"}),n.state==_&&Object(c.jsx)("button",{className:"btn btn-success m-1",onClick:function(){r(Object(S.a)(Object(S.a)({},n),{},{roundHasWinner:!1,state:P,current:0,playersSlots:n.playersSlots.map((function(e){return Object(S.a)(Object(S.a)({},e),{},{cardSelected:void 0,score:0,status:n.roundHasWinner||e.status!==f?p:e.status})}))}))},children:"Next Round"})]}),n.playersSlots.map((function(e,t){return e.ok&&Object(c.jsx)("div",{className:"col-6 col-md-4 col-lg-2",children:Object(c.jsx)(y,{data:e,onReady:H,turn:t==n.current,show:n.state>=F},"playerSession-".concat(t))})}))]})}),n.state===L&&Object(c.jsx)("div",{className:"container fixed-bottom",children:Object(c.jsx)("div",{className:"row",children:d.map((function(e){return Object(c.jsx)("div",{className:"col m-0 p-0",children:Object(c.jsx)(C,{card:e,onSelect:function(){return E(e)},player:n.playersSlots[n.current]})},"slot_".concat(e.name))}))})})]})},T=function(e){return Object(c.jsx)(c.Fragment,{children:Object(c.jsx)(E,{})})},H=function(e){return Object(c.jsx)(T,{})};var M=function(){return Object(c.jsx)("div",{className:"App",children:Object(c.jsx)(H,{})})},A=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,20)).then((function(t){var a=t.getCLS,c=t.getFID,s=t.getFCP,n=t.getLCP,r=t.getTTFB;a(e),c(e),s(e),n(e),r(e)}))};a(17),a(18);i.a.render(Object(c.jsx)(n.a.StrictMode,{children:Object(c.jsx)(M,{})}),document.getElementById("root")),A()}},[[19,1,2]]]);
//# sourceMappingURL=main.21e443f6.chunk.js.map